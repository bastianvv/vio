meta {
  name: list-movies
  type: http
  seq: 2
}

get {
  url: {{base_url}}{{api_path}}{{movies_path}}?library_id=1
  body: none
  auth: inherit
}

params:query {
  library_id: 1
}

tests {
  test("Movies list returned", () => {
    expect(Array.isArray(res.body)).to.be.true;
  });
  
  for (const movie of res.body) {
    test(`movie ${movie.id} has a title`, () => {
      expect(movie.title).to.be.a("string");
    });
  }
  
}

settings {
  encodeUrl: true
  timeout: 0
}
